<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Company</title>

        <link href="bootstrap-4.3.1/css/bootstrap.min.css" rel="stylesheet">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet" type="text/css">
      
        <script src="js/jquery-3.4.1.min.js"></script>
        <script src="bootstrap-4.3.1/js/bootstrap.min.js"></script>
    </head>
    <body class="body">
		<div class="main-header">  			
				<object type="image/svg+xml" data="icon.svg" class="company-logo">
				   Your browser does not support SVG
				</object>  
				
				<div class="burger-menu__button" onclick="openMenu()">
					<span class="burger-menu__button-title">Menu</span>
					<span class="burger-menu__button-icon icons">
						<i class="fa fa-bars fa-lg" aria-hidden="true"></i>
					</span>
				</div>							
				<nav class='nav_titles'>
				  <ul class='pages-titles'>
					<li><a href="index.html">Home</a></li>
					<li><a href="index.html">Headlines</a></li>
					<li><a href="index.html">QWERTYUIOPQWERTYUIOPQWERTYUIOPQWWERTTYUUIOP</a></li>
					<li><a href="index.html">Page 2</a></li>
					<li><a href="index.html">Page 3</a></li>
					<li><a href="index.html">Page 4</a></li>
					<li><a href="index.html">Page 5</a></li>
				  </ul>
				  <button>More <i class="fa fa-angle-down" aria-hidden="true"> </i> </button>
				  <ul class='overflow hidden'></ul>
				</nav>		
        </div>
		<div class="burger-menu">		
			<ul class="burger-menu__nav"> 
				 <div class="burger-menu__close">
					<a href="javascript:void(0)" onclick="closeMenu()"><i class="fa fa-times fa-2x close__icon"></i></a>
				</div>
				<!--<a href="index.html" class="burger-menu__link active-link">Home</a>
				<a href="headlines.html" class="burger-menu__link">Headlines</a>
				<a href="page1.html" class="burger-menu__link">Page 1</a>
				<a href="page2.html" class="burger-menu__link">Page 2</a>
				<a href="page3.html" class="burger-menu__link">Page 3</a>-->
			</ul>

		</div>
        <div class="sidenav">
            <div class="filter-title-container">    
				<h6 class="filter-title-container__title">Filters</h6>             
                <div class="close-icon">
                    <a href="javascript:void(0)" onclick="closeNav()"><i class="fa fa-times icons"></i></a>
                </div>
            </div>
			<div class="filter-panel">
				<div class="filter-block filter-panel__block">
					<p class="filter-block__subtitle">NPS Group</p> 
					<label class="filter-block__form-check">
						<input type="checkbox" id="detractor" checked="checked" onchange="getTilesData()">
						<span class="checkmark"></span>
						<span class="label-title">Detractor</span>
					</label>
					<label class="filter-block__form-check">
						<input type="checkbox" id="passive" onchange="getTilesData()">
						<span class="checkmark"></span>
						<span class="label-title">Passive</span>
					</label>
					<label class="filter-block__form-check">
						<input type="checkbox" id="promoter" onchange="getTilesData()">
						<span class="checkmark"></span>
						<span class="label-title">Promoter</span>
					</label>
				</div>
				
				<div class="filter-block filter-panel__block">
					<p class="filter-block__subtitle"">Product Group</p>
					<label class="filter-block__form-check"> 
						<input type="radio" name="radio" id="product-a" checked="checked" onchange="getTilesData()">
						<span class="radiobutton"></span>
						<span class="label-title">Product Group A</span>
					</label>
					<label class="filter-block__form-check"> 
						<input type="radio" name="radio" id="product-b" onchange="getTilesData()">
						<span class="radiobutton"></span>
						<span class="label-title">Product Group B</span>
					</label>
					<label class="filter-block__form-check"> 
						<input type="radio" name="radio" id="product-c" onchange="getTilesData()">
						<span class="radiobutton"></span>
						<span class="label-title">Product Group C</span>
					</label>
					<label class="filter-block__form-check"> 
						<input type="radio" name="radio" id="product-d" onchange="getTilesData()">
						<span class="radiobutton"></span>
						<span class="label-title">Product Group D</span>
					</label> 
				</div>
			</div>
        </div>
        <div class="main">
            <span onclick="openNav()" class="main__icons icons">
                <i class="fa fa-angle-left"></i>
                <i class="fa fa-filter"></i>
            </span>  
            <h5 class="main__title">Performance & Drivers</h5>
            <div class="main__container">
                <div class="flex-container">	
                	<div class="small-tiles-container">
                    	<div class="small-tile">
							<div class="small-tile-info">
								<h3 class="tile-title small-tile-info__title">NPS</h3>
								<p id="nps-average" class="tile-data small-tile-info__title__data"></p>
							</div>
                   		</div>					
						<div class="small-tile">
							<div class="small-tile-info">
								<h3 class="tile-title small-tile-info__title">Overall Satisfaction</h3>
								<p id="osat-average" class="tile-data small-tile-info__title__data"></p>
							</div>
						</div> 
                    </div>
					<div class="small-tiles-container">
						<div class="small-tile">
							<div class="small-tile-info">
								<h3 class="tile-title small-tile-info__title">Easy</h3>
								<p id="easy-average" class="tile-data small-tile-info__title__data"></p>
							</div>
						</div>
						<div class="small-tile">
							<div class="small-tile-info">
								<h3 class="tile-title small-tile-info__title">Likely To Renew</h3>
								<p id="ltr-average" class="tile-data small-tile-info__title__data"></p>
							</div>
						</div>
					</div>
					<div class="big-tile-container">
						<div class="big-tile">
							<div class="big-tile-info">
								<h3 class="tile-title big-tile-info__title">Team Performance</h3>						
								<div class="table-wrap big-tile-info__table">
									<table class="team-perf-table">						
										<tr>
											<th class="headcol"><a href="javascript:void(0)" onclick="sortTableAlphabetically()"><i class="fa fa-sort" aria-hidden="true"></i></a></th>
											<th class="table-header" onclick="sortTableOsat()">Overall <i class="fa fa-sort sort-icon" aria-hidden="true"></th>
											<th class="table-header" onclick="sortTableRsp()">Responsiveness<i class="fa fa-sort sort-icon" aria-hidden="true"></th>
											<th class="table-header" onclick="sortTablePrd()">Product knowledge <i class="fa fa-sort sort-icon" aria-hidden="true"></th>
										</tr>								
										<tr>
											<th class="title-th headcol">Global</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>
										<tr>
											<th class="title-th headcol">EMEA</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>
										<tr>
											<th class="title-th headcol">Canada</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>
										<tr>
											<th class="title-th headcol">United States</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>
										<tr>
											<th class="title-th headcol">APAC</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>
										<tr>
											<th class="title-th headcol">S. America</th>
											<th></th>
											<th></th>
											<th></th>
										</tr>								
									</table>								
								</div>
							</div>
						</div>
					</div>
                </div> 
			</div>	
		</div>			
        <script src="data.json"></script>
        <script src="methods.js"></script>
        <script>
            'use strict';
            var dataLength = Object.keys(data).length;
            var regions = ["Global", "EMEA", "Canada", "United States", "APAC", "S. America"];
            var tableValues = new Array(regions.length);
            var ascAlphSort = false, ascOsatSort = false, ascRspSort = false, ascPrdSort = false;	

            getTilesData();
			/*	
			$(document).ready(function(){
				//$('.pages-titles li').not('.more').clone().appendTo($('.burger-menu__nav'));
				//$('.burger-menu__nav li').addClass('burger-menu__link');
				//$('.burger-menu__nav li').removeClass('pages-titles__link');
				
				var title_width = $('.pages-titles li').width();
				var title_count = $('.pages-titles li').length;
				
				var nav_width_start = $(".main-header").width();
				var nav_width = $(".main-header").width();
						
				if (nav_width < (title_width * (title_count + 1)) ){
					$('.more').appendTo('.pages-titles');
					$('.more').hide();
				}
				
				while (nav_width < title_width * (title_count + 1)) {
					$('.pages-titles li').not('.more').last().appendTo($('.overflow'));			  
					$('.more').appendTo($('.pages-titles'));
					$('.more').show();
					
					nav_width = $('.main-header').width();
					title_width = $('.pages-titles li').width();
					title_count = $('.pages-titles li').length; 									
				}
				 
				$(window).resize(function() { 			  
					nav_width = $('.main-header').width();
					title_width = $('.pages-titles li').width();
					title_count = $('.pages-titles li').length;
				
					if (nav_width < (title_width * title_count)){
						$('.pages-titles li').not('.more').last().appendTo($('.overflow'));
					
						$('.more').appendTo($('.pages-titles'));
						$('.more').show();
					}
						
					if (nav_width > title_width * title_count + title_width) {
						$('.overflow li').last().appendTo($('.pages-titles'));			  
						$('.more').appendTo($('.pages-titles'));
					}
				
				   
					if (nav_width == nav_width_start ){
						$('.more').appendTo('.main-header');
						$('.more').hide();
					}
										  
				});
				  
				$('.more').click(function() {
				   $('.overflow').slideToggle(); 
				});
			});*/
			
			$(function() {
			  var $nav = $('.nav_titles');
			  var $btn = $('.nav_titles button');
			  var $vlinks = $('.nav_titles .pages-titles');
			  var $hlinks = $('.nav_titles .overflow');

			  var numOfItems = 0;
			  var totalSpace = 0;
			  var breakWidths = [];

			  $vlinks.children().outerWidth(function(i, w) {
				totalSpace += w;
				numOfItems += 1;
				breakWidths.push(totalSpace);
			  });

			  var availableSpace, numOfVisibleItems, requiredSpace;

			  function check() {
				availableSpace = $vlinks.width() - 10;
				numOfVisibleItems = $vlinks.children().length;
				requiredSpace = breakWidths[numOfVisibleItems - 1];
				
				if (requiredSpace > availableSpace) {
				  $vlinks.children().last().prependTo($hlinks);
				  numOfVisibleItems -= 1;
				  check();
				  
				} 
				else 
					if (availableSpace > breakWidths[numOfVisibleItems]) {
					  $hlinks.children().first().appendTo($vlinks);
					  numOfVisibleItems += 1;
					}
				if (numOfItems == numOfVisibleItems)
					$btn.hide();
				else 
					$btn.show();
				}

			  $(window).resize(function() {
				check();
			  });

			  $btn.on('click', function() {			
					$hlinks.toggleClass('hidden');
			  });

			  check();

			});
        </script>
    </body>
</html>
